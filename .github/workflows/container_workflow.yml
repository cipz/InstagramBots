name: Containerized workflow
on: 
#  # To manually execute action
  [workflow_dispatch]
#   schedule:
#     # * is a special character in YAML so you have to quote this string
#      - cron:  '30 */10 * * *'
jobs:
  build:
    runs-on: ubuntu-latest
    container: cipz/instagram_bots:latest
    steps:
        - name: Checkout Project
          uses: actions/checkout@v2

        ### santo_del_giorno ###

        - name: Running python script santo_del_giorno
          working-directory: "santo_del_giorno"
          continue-on-error: true
          env:
            santo_username: ${{ secrets.santo_username }}
            santo_password: ${{ secrets.santo_password }}
          run: |
            python3 -u santo_del_giorno.py
        - name: Commit files if any
          id: commit_santo_del_giorno
          working-directory: "santo_del_giorno"
          run: |
            git config --local user.email "action@github.com"
            git config --local user.name "github-actions"
            git add params.json
            git commit -m "New post from santo_del_giorno" -a
          continue-on-error: true
          shell: bash
          

        ### PUSHING ALL CHANGES ###

        - name: Push changes if any
          uses: ad-m/github-push-action@master
          with:
            github_token: ${{ secrets.GITHUB_TOKEN }}
          continue-on-error: true
